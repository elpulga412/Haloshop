{% extends 'dashboard/dashboard.html' %}
{% load static %}
{% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
    <h2>Dashboard</h2>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
      <div class="col">
        <div class="card shadow-sm">
          <h4 style="padding: 10px; text-align: center; margin: 0px;">Total Orders</h4>
          <hr style="margin: 0px;">
          <div class="card-body">
            <p class="card-text" id="total-orders" style="font-size: 34px; text-align: center;"></p>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card shadow-sm">
          <h4 style="padding: 10px; text-align: center; margin: 0px;">Orders Delivered</h4>
          <hr style="margin: 0px;">
          <div class="card-body">
            <p class="card-text" id="order-delivered" style="font-size: 34px; text-align: center;"></p>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card shadow-sm">
          <h4 style="padding: 10px; text-align: center; margin: 0px;">Orders Pending</h4>
          <hr style="margin: 0px;">
          <div class="card-body">
            <p class="card-text" id="order-pending" style="font-size: 34px; text-align: center;"></p>
          </div>
        </div>
      </div>
    </div>
    <h2>New Orders</h2>
    <div class="table-responsive">
      <table class="table table-striped table-sm">
        <thead>
          <tr>
            <th scope="col">Transaction Id</th>
            <th scope="col">Email Addres</th>
            <th scope="col">Full Name</th>
            <th scope="col">Phone Number</th>
            <th scope="col">Address</th>
            <th scope="col">District</th>
            <th scope="col">City</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody class="content-table">

        </tbody>
      </table>
    </div>
</main>
<script src="{% static 'js/dashboard.js' %}"></script>
<script>buildDashboard()</script>
<script>
  fetch('/dashboard/dashboard-api/')
  .then(res => res.json())
  .then(data => {
    document.getElementById("total-orders").innerHTML = `<strong>${data.total_orders}</strong>`
    document.getElementById("order-delivered").innerHTML = `<strong>${data.orders_delivered}</strong>`
    document.getElementById("order-pending").innerHTML = `<strong>${data.orders_pending}</strong>`
  })
</script> 
{% endblock content %}